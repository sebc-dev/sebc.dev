---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/i18n/ui.ts
  - src/i18n/utils.ts
  - src/components/ui/GlowLine.astro
  - src/styles/global.css
autonomous: true

must_haves:
  truths:
    - "useTranslations returns correct strings for both 'en' and 'fr' locales"
    - "getLangFromUrl extracts locale from any locale-prefixed URL path"
    - "GlowLine renders a decorative teal gradient separator"
    - "text-muted is never used for body text on surface backgrounds (WCAG AA)"
  artifacts:
    - path: "src/i18n/ui.ts"
      provides: "Translation dictionaries for EN and FR"
      exports: ["languages", "defaultLang", "ui"]
    - path: "src/i18n/utils.ts"
      provides: "i18n helper functions"
      exports: ["getLangFromUrl", "useTranslations"]
    - path: "src/components/ui/GlowLine.astro"
      provides: "Decorative teal gradient line component"
    - path: "src/styles/global.css"
      provides: "WCAG-safe design tokens and animation keyframes"
  key_links:
    - from: "src/i18n/utils.ts"
      to: "src/i18n/ui.ts"
      via: "import { ui, defaultLang }"
      pattern: "import.*from.*ui"
---

<objective>
Create the i18n translation system, the GlowLine UI component, and apply WCAG AA contrast fixes to the design token system.

Purpose: These are the zero-dependency foundation pieces that every other Phase 1 component will import. The i18n layer provides typed translations. The GlowLine is used by the Footer. The WCAG fixes ensure all color usage is accessible from the start.

Output: Translation dictionaries, i18n utilities, GlowLine component, and WCAG-compliant global CSS.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@src/styles/global.css
@tsconfig.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create i18n translation system</name>
  <files>src/i18n/ui.ts, src/i18n/utils.ts</files>
  <action>
Create the i18n translation layer following the official Astro recipe pattern.

**src/i18n/ui.ts:**
- Export `languages` object: `{ en: "English", fr: "Francais" } as const`
- Export `defaultLang = "en" as const`
- Export `ui` object with keys for both locales. Include ALL UI strings needed for Phase 1:
  - `nav.home`: "Home" / "Accueil"
  - `nav.search`: "Search" / "Recherche"
  - `nav.about`: "About" / "A propos"
  - `footer.description`: "Technical blog — AI x Engineering x UX" / "Blog technique — IA x Ingenierie x UX"
  - `footer.copyright`: "All rights reserved." / "Tous droits reserves."
  - `lang.switch`: "Switch to {label}" / "Passer en {label}" (for aria-labels)
  - `404.title`: "Page not found" / "Page introuvable"
  - `404.message`: "This page doesn't exist." / "Cette page n'existe pas."
  - `404.back`: "Go to homepage" / "Retour a l'accueil"
- Type the `ui` object so both locales have identical keys (TypeScript enforces this)

**src/i18n/utils.ts:**
- Import `ui` and `defaultLang` from `./ui`
- Export `getLangFromUrl(url: URL)`: extracts locale from pathname by splitting on `/` and checking if second segment is in `ui`. Returns `keyof typeof ui` or `defaultLang`.
- Export `useTranslations(lang: keyof typeof ui)`: returns a `t(key)` function that looks up the key in `ui[lang]`, falling back to `ui[defaultLang]`. The `key` parameter must be typed as `keyof (typeof ui)[typeof defaultLang]` for autocomplete.

Use `@/*` import alias (configured in tsconfig.json paths). Do NOT use relative paths from components -- they will import as `@/i18n/utils`.
  </action>
  <verify>Run `npx astro check` to verify TypeScript compiles. Manually verify that `ui.en` and `ui.fr` have identical keys by inspecting the type.</verify>
  <done>Both files exist, export their named exports, TypeScript compiles with no errors, and both locales have all required UI string keys.</done>
</task>

<task type="auto">
  <name>Task 2: Create GlowLine component and apply WCAG contrast fixes</name>
  <files>src/components/ui/GlowLine.astro, src/styles/global.css</files>
  <action>
**src/components/ui/GlowLine.astro:**
- Create a simple decorative component that renders a `<div>` with the `.glow-line` class (already defined in global.css)
- Add `role="presentation"` and `aria-hidden="true"` since it is purely decorative
- Add `class="glow-line w-full"` for full-width by default
- Accept an optional `class` prop to allow overriding/extending classes: `interface Props { class?: string; }` and merge with default classes using `class:list`

**src/styles/global.css -- WCAG contrast improvements:**
The research identified two FAIL cases. Apply these fixes:

1. Add a comment block documenting WCAG AA contrast rules above the `@theme` block:
   ```
   /* WCAG AA Contrast Rules:
      - text-muted (#6b6b6b): ONLY for large text (18px+) on canvas. NEVER on surface.
      - teal (#0d9488): Text on canvas ONLY. Use teal-bright on surface.
      - text-secondary (#a0a0a0): Safe on all backgrounds.
      - text-primary (#e6e6e6): Safe everywhere. */
   ```

2. Update the IntersectionObserver script fade-up stagger delay classes. Add these CSS rules after the existing `.fade-up.in-view` rule:
   ```css
   .fade-up-d1 { animation-delay: 0.1s; }
   .fade-up-d2 { animation-delay: 0.15s; }
   .fade-up-d3 { animation-delay: 0.2s; }
   .fade-up-d4 { animation-delay: 0.25s; }
   ```
   These stagger classes are used in the home page mockup for article cards and will be needed in Phase 2.

Do NOT change any color values in the design tokens -- the tokens themselves are correct. The issue is usage guidance, not token values.
  </action>
  <verify>Run `npx astro check` to verify no TypeScript errors. Run `npx astro build` to confirm the build succeeds with the new component and CSS changes.</verify>
  <done>GlowLine.astro exists with decorative ARIA attributes, global.css has WCAG contrast comment documentation and stagger delay classes, and the project builds successfully.</done>
</task>

</tasks>

<verification>
- `npx astro check` passes with no errors
- `npx astro build` succeeds
- `src/i18n/ui.ts` exports `languages`, `defaultLang`, and `ui` with EN+FR keys
- `src/i18n/utils.ts` exports `getLangFromUrl` and `useTranslations`
- `src/components/ui/GlowLine.astro` renders with correct ARIA attributes
- `src/styles/global.css` has WCAG documentation and stagger delay classes
</verification>

<success_criteria>
- i18n system provides typed translations for all Phase 1 UI strings in both locales
- GlowLine component renders a decorative separator with proper accessibility attributes
- WCAG contrast usage rules are documented in global.css
- All files compile and build without errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
