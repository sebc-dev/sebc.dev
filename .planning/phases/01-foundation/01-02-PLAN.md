---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/components/layout/Nav.astro
  - src/components/layout/LangSwitch.astro
  - src/components/layout/Header.astro
  - src/components/layout/Footer.astro
autonomous: true

must_haves:
  truths:
    - "Header is sticky with backdrop blur and contains logo, navigation, and language switcher"
    - "Navigation links show active state for the current page using teal-bright color"
    - "Language switcher preserves the current page path when switching locale"
    - "Footer shows site description, social links (GitHub, Twitter/X, LinkedIn, RSS), glow-line, and copyright"
  artifacts:
    - path: "src/components/layout/Header.astro"
      provides: "Sticky header with logo, nav, and lang switch"
      min_lines: 15
    - path: "src/components/layout/Footer.astro"
      provides: "Site footer with description, social links, glow-line, copyright"
      min_lines: 40
    - path: "src/components/layout/Nav.astro"
      provides: "Navigation links with active state detection"
      min_lines: 20
    - path: "src/components/layout/LangSwitch.astro"
      provides: "Locale toggle preserving current path"
      min_lines: 15
  key_links:
    - from: "src/components/layout/Nav.astro"
      to: "src/i18n/utils.ts"
      via: "import { getLangFromUrl, useTranslations }"
      pattern: "getLangFromUrl|useTranslations"
    - from: "src/components/layout/LangSwitch.astro"
      to: "src/i18n/ui.ts"
      via: "import { languages }"
      pattern: "languages"
    - from: "src/components/layout/Header.astro"
      to: "src/components/layout/Nav.astro"
      via: "import Nav"
      pattern: "import Nav"
    - from: "src/components/layout/Header.astro"
      to: "src/components/layout/LangSwitch.astro"
      via: "import LangSwitch"
      pattern: "import LangSwitch"
    - from: "src/components/layout/Footer.astro"
      to: "src/components/ui/GlowLine.astro"
      via: "import GlowLine"
      pattern: "import GlowLine"
---

<objective>
Build all four layout shell components: Nav, LangSwitch, Header, and Footer.

Purpose: These components compose the site-wide layout shell that wraps every page. Header provides navigation and language switching. Footer provides site info and social links. Both are responsive and WCAG AA compliant.

Output: Four Astro components ready to be integrated into BaseLayout (Plan 03).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
@src/styles/global.css
@docs/design-research/home.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Nav and LangSwitch components</name>
  <files>src/components/layout/Nav.astro, src/components/layout/LangSwitch.astro</files>
  <action>
**src/components/layout/Nav.astro:**
- Import `getLangFromUrl` and `useTranslations` from `@/i18n/utils`
- Get current lang and translation function in frontmatter
- Define `navItems` array with objects containing `key` (translation key) and `href` (localized path):
  - Home: `/{lang}` (use `nav.home` key)
  - Search: `/{lang}/search` (use `nav.search` key)
  - About: `/{lang}/about` (use `nav.about` key)
- Create `isActive(href)` function:
  - For home (`/{lang}`): match exact path (with or without trailing slash)
  - For others: use `pathname.startsWith(href)`
- Render a `<nav aria-label="Main navigation">` with `<ul>` list
- Each link uses `class:list` with conditional classes:
  - Active: `text-teal-bright font-semibold` (note: use `text-teal-bright` not `text-teal` for WCAG AA compliance on all backgrounds)
  - Inactive: `text-text-secondary hover:text-text-primary transition-colors`
- Add `aria-current="page"` on the active link
- Use `text-sm` for link font size, `gap-6` between items
- Mobile: keep horizontal nav (3 items fit on 375px). If they don't fit, consider `gap-4` on small screens: `gap-4 sm:gap-6`

**src/components/layout/LangSwitch.astro:**
- Import `languages` from `@/i18n/ui` and `getLangFromUrl` from `@/i18n/utils`
- Get `currentLang` and `currentPath` from Astro context in frontmatter
- Create `getLocalizedPath(targetLang: string)` function:
  - Strip current locale prefix: `currentPath.replace(/^\/[a-z]{2}(\/|$)/, "/")`
  - Handle root case: if result is `/`, use empty string
  - Return `/${targetLang}${cleanPath}`
- Render as `<div class="flex items-center gap-1 text-sm">`
- Map over `Object.entries(languages)` to render each locale as an `<a>` tag
- Active locale: `text-teal-bright font-semibold` (not just bg-surface like the mockup -- use color for better accessibility)
- Inactive locale: `text-text-secondary hover:text-text-primary transition-colors`
- Add `aria-current="true"` on the current locale link
- Add `aria-label` using the language label (e.g., "Switch to English" / "Passer en Francais")
- Use `px-2 py-1 rounded-sm` for click target size (minimum 24x24px tap target)
  </action>
  <verify>Run `npx astro check` to verify TypeScript compiles. Verify that all i18n imports resolve correctly.</verify>
  <done>Nav.astro renders 3 navigation links with active state detection and ARIA attributes. LangSwitch.astro renders locale toggle links that preserve the current page path. Both use the i18n translation system.</done>
</task>

<task type="auto">
  <name>Task 2: Create Header and Footer components</name>
  <files>src/components/layout/Header.astro, src/components/layout/Footer.astro</files>
  <action>
**src/components/layout/Header.astro:**
- Import `Nav` from `./Nav.astro` and `LangSwitch` from `./LangSwitch.astro`
- Import `getLangFromUrl` from `@/i18n/utils`
- Get current lang in frontmatter
- Structure matching the design mockup (home.html header):
  ```
  <header class="sticky top-0 z-50 bg-canvas/90 backdrop-blur-lg border-b border-border-subtle">
    <div class="max-w-6xl mx-auto px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <!-- Logo -->
        <!-- Nav + LangSwitch -->
      </div>
    </div>
  </header>
  ```
- Logo: Link to `/{lang}` with the `>_` symbol in a teal-bordered box:
  ```
  <a href={`/${lang}`} class="flex items-center gap-2 group">
    <span class="w-8 h-8 bg-teal/15 border border-teal/30 rounded-sm flex items-center justify-center text-teal-bright font-code text-sm font-medium group-hover:bg-teal/25 transition-colors">&gt;_</span>
    <span class="text-lg font-semibold tracking-tight text-text-primary">sebc.dev</span>
  </a>
  ```
  Note: Use `text-teal-bright` (not `text-teal`) for the >_ symbol for WCAG compliance on the teal/15 background.
- Right side: `<div class="flex items-center gap-6">` containing `<Nav />` and `<LangSwitch />`
- On mobile (< sm): hide the site name text, keep the >_ icon. Use `hidden sm:inline` on the text span.

**src/components/layout/Footer.astro:**
- Import `getLangFromUrl`, `useTranslations` from `@/i18n/utils`
- Import `GlowLine` from `@/components/ui/GlowLine.astro`
- Get lang, translation function, and current year in frontmatter
- Define `socialLinks` array with: GitHub, Twitter/X, LinkedIn, RSS
  - Use placeholder URLs for now (the actual URLs are an open question from research)
  - RSS link should be locale-aware: `/${lang}/rss.xml`
- Structure matching the design mockup (home.html footer):
  ```
  <footer class="mt-auto border-t border-border">
    <div class="max-w-6xl mx-auto px-6 lg:px-8 py-12">
      <!-- Top: logo + description | social links -->
      <!-- GlowLine separator -->
      <!-- Bottom: copyright -->
    </div>
  </footer>
  ```
- Top section: flex col on mobile, row on md+
  - Left: `>_` logo (smaller: w-6 h-6), site name, description using `t("footer.description")`
  - Right: social links as SVG icons with `text-text-secondary hover:text-teal-bright transition-colors` (use text-secondary not text-muted for WCAG on canvas background). Each has `aria-label`.
- SVG icons: Inline the Lucide icon SVGs for GitHub, Twitter/X (use the X bird path), LinkedIn, and RSS. Each icon is 20x20, stroke-based. Copy the SVG paths from the home.html mockup.
- External links (GitHub, Twitter/X, LinkedIn): add `target="_blank" rel="noopener noreferrer"`
- GlowLine separator between top section and copyright
- Copyright: `<p class="text-text-muted text-xs mt-8">` with year and `t("footer.copyright")`. text-muted at text-xs (12px) is acceptable for copyright since it's decorative/non-essential content.
- Responsive: stack vertically on mobile, horizontal on md+
  </action>
  <verify>Run `npx astro check` to verify all imports resolve and TypeScript compiles. Run `npx astro build` to confirm no build errors.</verify>
  <done>Header.astro renders a sticky header with >_ logo, Nav component, and LangSwitch component. Footer.astro renders site description, 4 social link icons, glow-line separator, and copyright. Both are responsive and use the i18n system.</done>
</task>

</tasks>

<verification>
- `npx astro check` passes with no errors
- `npx astro build` succeeds
- Header.astro imports and renders Nav + LangSwitch
- Footer.astro imports and renders GlowLine + uses i18n translations
- Nav has active state detection with `aria-current="page"`
- LangSwitch preserves current path when toggling locale
- All text colors follow WCAG AA contrast rules (no text-muted on surface, no base teal for body text)
- All components use `@/*` import alias paths
</verification>

<success_criteria>
- Four layout components exist and compile without errors
- Header has sticky positioning, backdrop blur, logo, navigation, and language switch
- Footer has description, 4 social icons, glow-line separator, and copyright
- Nav detects active page and applies teal-bright styling
- LangSwitch links preserve the current page path across locale toggle
- All components are responsive (work on 375px mobile and desktop)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
