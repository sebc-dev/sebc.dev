---
phase: 02-home-page
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/content/articles/en-building-design-system.mdx
  - src/content/articles/en-typescript-patterns.mdx
  - src/content/articles/en-css-container-queries.mdx
  - src/content/articles/fr-construire-design-system.mdx
  - src/content/articles/fr-patterns-typescript.mdx
  - src/content/articles/fr-css-container-queries.mdx
  - src/lib/articles.ts
  - src/utils/dates.ts
  - src/i18n/ui.ts
  - src/components/ui/Tag.astro
autonomous: true

must_haves:
  truths:
    - "Content collection returns articles filtered by locale and sorted by date"
    - "Featured article is identifiable (first article with featured: true, or most recent)"
    - "Categories are extracted and deduplicated from articles"
    - "Dates format correctly per locale (EN: 'Jan 15, 2026', FR: '15 janv. 2026')"
    - "Tag component renders 3 visual variants (default, active, badge)"
    - "i18n strings exist for home page and article metadata in both EN and FR"
  artifacts:
    - path: "src/lib/articles.ts"
      provides: "Article data access layer"
      exports: ["getArticlesByLocale", "getFeaturedArticle", "getCategories", "getArticleUrl", "Article"]
    - path: "src/utils/dates.ts"
      provides: "Locale-aware date formatting"
      exports: ["formatDate"]
    - path: "src/components/ui/Tag.astro"
      provides: "Reusable tag/badge component with 3 variants"
      min_lines: 15
    - path: "src/content/articles/en-building-design-system.mdx"
      provides: "Featured seed article (EN)"
      contains: "featured: true"
    - path: "src/i18n/ui.ts"
      provides: "Home page and article i18n strings"
      contains: "home.description"
  key_links:
    - from: "src/lib/articles.ts"
      to: "astro:content"
      via: "getCollection with filter callback"
      pattern: "getCollection.*articles.*entry.*data\\.lang"
    - from: "src/utils/dates.ts"
      to: "Intl.DateTimeFormat"
      via: "native date formatting API"
      pattern: "Intl\\.DateTimeFormat"
    - from: "src/lib/articles.ts"
      to: "src/content/articles/*.mdx"
      via: "content collection glob loader"
      pattern: "getCollection.*articles"
---

<objective>
Build the data foundation for Phase 2: seed MDX articles, article data access layer, date formatting utility, Tag component, and i18n strings.

Purpose: Every visual component in Plan 02 depends on having real article data to query, typed helper functions to call, and i18n strings for labels. This plan creates all of those prerequisites.
Output: 6 seed MDX articles (3 EN + 3 FR), src/lib/articles.ts, src/utils/dates.ts, src/components/ui/Tag.astro, updated src/i18n/ui.ts
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-home-page/02-RESEARCH.md
@src/content.config.ts
@src/i18n/ui.ts
@src/i18n/utils.ts
@src/styles/global.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create seed MDX articles and i18n strings</name>
  <files>
    src/content/articles/en-building-design-system.mdx
    src/content/articles/en-typescript-patterns.mdx
    src/content/articles/en-css-container-queries.mdx
    src/content/articles/fr-construire-design-system.mdx
    src/content/articles/fr-patterns-typescript.mdx
    src/content/articles/fr-css-container-queries.mdx
    src/i18n/ui.ts
  </files>
  <action>
    Create 6 seed MDX articles (3 EN + 3 FR) in src/content/articles/ with valid frontmatter matching the schema in content.config.ts. Files are flat in the directory (no subdirectories -- prevents entry.id path separator issues per Research Pitfall 6).

    Naming convention: {lang}-{slug}.mdx (e.g., en-building-design-system.mdx).

    Article 1 (EN featured):
    - title: "Building a Modern Design System with Tailwind v4"
    - description: "Exploring the new @theme directive and how it transforms the way we build design systems."
    - date: 2026-01-15
    - category: "design-systems"
    - tags: ["tailwind", "css", "design-systems"]
    - pillarTags: ["Ingenierie", "UX"]
    - image: "https://picsum.photos/seed/design-system/800/500"
    - readingTime: 8
    - featured: true
    - draft: false
    - lang: "en"
    - translationSlug: "fr-construire-design-system"
    - Body: 2-3 paragraphs of placeholder content about design systems.

    Article 2 (EN):
    - title: "TypeScript 5.4: Advanced Type Patterns for Safer APIs"
    - description: "Deep dive into conditional types, mapped types, and template literal types."
    - date: 2026-01-10
    - category: "typescript"
    - tags: ["typescript", "advanced"]
    - pillarTags: ["Ingenierie"]
    - image: "https://picsum.photos/seed/ts54/800/500"
    - readingTime: 12
    - featured: false
    - draft: false
    - lang: "en"
    - translationSlug: "fr-patterns-typescript"

    Article 3 (EN, no image -- tests fallback):
    - title: "CSS Container Queries: The Future of Responsive Design"
    - description: "How container queries are revolutionizing component-based responsive design patterns."
    - date: 2025-12-28
    - category: "css"
    - tags: ["css", "responsive"]
    - pillarTags: ["UX", "Ingenierie"]
    - image: omit (tests the optional image fallback)
    - readingTime: 10
    - featured: false
    - draft: false
    - lang: "en"

    Create 3 matching FR articles with the same categories/tags but French titles, descriptions, and body text. The FR featured article is fr-construire-design-system.mdx with featured: true. Dates should be the same as EN counterparts.

    IMPORTANT: pillarTags must use the exact enum values with accents: "IA", "Ingenierie" (with accent: "Ing\u00e9nierie"), "UX". Check content.config.ts -- it uses z.enum(["IA", "Ing\u00e9nierie", "UX"]).

    Also update src/i18n/ui.ts to add these keys to BOTH en and fr objects:
    - "home.description": EN "Technical blog about AI, Software Engineering & UX" / FR "Blog technique sur l'IA, l'Ing\u00e9nierie logicielle & l'UX"
    - "home.noArticles": EN "No articles yet. Check back soon!" / FR "Pas encore d'articles. Revenez bient\u00f4t !"
    - "home.filterAll": EN "All" / FR "Tous"
    - "article.readingTime": EN "min read" / FR "min de lecture"

    The ui.ts type system requires all keys to exist in the defaultLang (en) object first. Add keys to en, then mirror in fr.
  </action>
  <verify>
    Run `npx astro check` -- should pass with no content collection errors.
    Run `npx astro build 2>&1 | head -50` -- seed articles should be processed without schema validation warnings.
  </verify>
  <done>
    6 MDX files exist in src/content/articles/ with valid frontmatter. At least 1 per locale has featured: true. At least 1 has no image field. i18n strings added for home.description, home.noArticles, home.filterAll, article.readingTime in both locales.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create article data access layer and date utility</name>
  <files>
    src/lib/articles.ts
    src/utils/dates.ts
  </files>
  <action>
    Create src/lib/articles.ts with these typed exports:

    1. `export type Article = CollectionEntry<"articles">` -- re-export for consumers
    2. `export async function getArticlesByLocale(lang: "en" | "fr"): Promise<Article[]>` -- calls getCollection("articles") with filter callback: entry.data.lang === lang AND !entry.data.draft. Sorts by date descending (newest first).
    3. `export async function getFeaturedArticle(lang: "en" | "fr"): Promise<Article | undefined>` -- calls getArticlesByLocale, returns first article with featured: true, or falls back to articles[0] if none featured.
    4. `export async function getCategories(lang: "en" | "fr"): Promise<string[]>` -- calls getArticlesByLocale, extracts unique categories via Set, returns sorted alphabetically.
    5. `export function getArticleUrl(article: Article): string` -- returns `/${article.data.lang}/articles/${article.id}`. This is synchronous (no async needed).

    Use `import { getCollection, type CollectionEntry } from "astro:content"` (Astro 5 API).

    Create src/utils/dates.ts with:

    1. `export function formatDate(date: Date, lang: string): string` -- uses Intl.DateTimeFormat with { day: "numeric", month: "short", year: "numeric" } and locale map { en: "en-US", fr: "fr-FR" }. Falls back to "en-US" for unknown langs.

    Both files should be pure TypeScript with no Astro component syntax. Use `@/` path aliases matching tsconfig.
  </action>
  <verify>
    Run `npx astro check` -- lib/articles.ts and utils/dates.ts should have no type errors.
    Create a temporary test: in src/pages/en/index.astro frontmatter, add `const articles = await getArticlesByLocale("en"); console.log("Articles found:", articles.length);` then run `npx astro build 2>&1 | grep "Articles found"` -- should print "Articles found: 3". Remove the test line after verification.
  </verify>
  <done>
    src/lib/articles.ts exports getArticlesByLocale, getFeaturedArticle, getCategories, getArticleUrl, and Article type. src/utils/dates.ts exports formatDate. Both pass type checking. getArticlesByLocale("en") returns 3 articles sorted newest-first from seed content.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Tag component with 3 variants</name>
  <files>src/components/ui/Tag.astro</files>
  <action>
    Create src/components/ui/Tag.astro with 3 visual variants matching the design mockup (docs/design-research/home.html).

    Props interface:
    - label: string (required)
    - variant: "default" | "active" | "badge" (optional, defaults to "default")
    - class: string (optional, for composition)

    Variant styles (from design mockup):
    - default: text-text-secondary border-border (used for article tags in cards)
    - active: text-teal-bright border-teal/20 bg-teal-dim (used for active filter state)
    - badge: text-teal bg-canvas/80 backdrop-blur-sm border-teal/20 (used for category badges on images)

    Base classes shared by all variants: text-xs font-code px-2.5 py-1 rounded-xs border

    Render as a <span> element. Use class:list for merging variant classes with optional className prop.

    IMPORTANT: Use rounded-xs (Tailwind v4, 2px corners), NOT rounded-sm. Reference design mockup for exact classes.
  </action>
  <verify>
    Run `npx astro check` -- Tag.astro should pass type checking.
    Visually inspect: the component file should have ~20-25 lines, with a clear variantClasses map and class:list composition.
  </verify>
  <done>
    Tag.astro renders a styled span with 3 variants. Accepts label, variant, and class props. Uses Tailwind v4 classes matching the design mockup exactly.
  </done>
</task>

</tasks>

<verification>
1. `npx astro check` passes with zero errors
2. `npx astro build` completes successfully -- seed articles processed, no schema validation warnings
3. src/lib/articles.ts is importable and returns correct data from seed content
4. src/utils/dates.ts formats dates correctly per locale
5. Tag.astro renders with all 3 variants
6. i18n/ui.ts has all new keys in both en and fr objects
</verification>

<success_criteria>
- 6 seed MDX articles exist (3 EN, 3 FR) with valid frontmatter
- Data access layer provides typed functions for all article queries
- Date utility formats dates with Intl.DateTimeFormat per locale
- Tag component renders 3 visual variants matching design mockup
- All new i18n strings present in both locales
- astro check and astro build pass cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/02-home-page/02-01-SUMMARY.md`
</output>
