---
import BaseLayout from "@/layouts/BaseLayout.astro";
import PillarBlock from "@/components/about/PillarBlock.astro";
import { getLangFromUrl, useTranslations } from "@/i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Social links for About page (GitHub, Twitter/X, LinkedIn, dev.to)
// Same URLs as Footer.astro for GitHub/Twitter/LinkedIn. dev.to is About-only.
const socialLinks = [
  {
    name: "GitHub",
    href: "https://github.com/sebc",
    icon: `<path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/>`,
    strokeBased: true,
  },
  {
    name: "Twitter/X",
    href: "https://x.com/sebc",
    icon: `<path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"/>`,
    strokeBased: true,
  },
  {
    name: "LinkedIn",
    href: "https://linkedin.com/in/sebc",
    icon: `<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/>`,
    strokeBased: true,
  },
  {
    name: "dev.to",
    href: "https://dev.to/sebc",
    icon: `<path d="M7.42 10.05c-.18-.16-.46-.23-.84-.23H6l.02 2.44.04 2.45.56-.02c.41 0 .63-.07.83-.26.24-.24.26-.36.26-2.2 0-1.91-.02-1.96-.29-2.18zM0 4.94v14.12h24V4.94H0zM8.56 15.3c-.44.58-1.06.77-2.53.77H4.71V8.53h1.4c1.67 0 2.16.18 2.6.9.27.43.29.6.32 2.57.05 2.23-.02 2.73-.47 3.3zm5.09-5.47h-2.47v1.77h1.52v1.28l-.72.04-.75.03v1.77l1.22.03 1.2.04v1.28h-1.6c-1.53 0-1.6-.01-1.87-.3l-.3-.28v-3.16c0-3.02.01-3.18.25-3.48.23-.31.25-.31 1.88-.31h1.64v1.3zm4.68 5.45c-.17.43-.64.79-1 .79-.18 0-.45-.15-.67-.39-.32-.32-.45-.63-.82-2.08l-.9-3.39-.45-1.67h.76c.4 0 .75.02.75.05 0 .06 1.16 4.54 1.26 4.83.04.15.32-.7.73-2.3l.66-2.52.74-.04c.4-.02.73 0 .73.04 0 .14-1.67 6.38-1.8 6.68z"/>`,
    strokeBased: false, // dev.to uses fill, not stroke
  },
];

// Pillar icon SVG paths (Lucide-style, stroke-based)
const pillarIcons = {
  ia: `<path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/><path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"/><path d="M17.599 6.5a3 3 0 0 0 .399-1.375"/><path d="M6.003 5.125A3 3 0 0 0 6.401 6.5"/><path d="M3.477 10.896a4 4 0 0 1 .585-.396"/><path d="M19.938 10.5a4 4 0 0 1 .585.396"/><path d="M6 18a4 4 0 0 1-1.967-.516"/><path d="M19.967 17.484A4 4 0 0 1 18 18"/>`,
  engineering: `<path d="m18 16 4-4-4-4"/><path d="m6 8-4 4 4 4"/><path d="m14.5 4-5 16"/>`,
  ux: `<rect width="18" height="18" x="3" y="3" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/>`,
};
---

<BaseLayout title={t("nav.about")} description={t("about.description")}>
  <!-- HERO SECTION -->
  <section
    class="max-w-4xl mx-auto px-6 lg:px-8 pt-16 pb-12 md:pt-24 md:pb-16 fade-up"
  >
    <div class="flex flex-col items-center text-center">
      <!-- Profile photo -->
      <div
        class="w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden border-2 border-border mb-6"
      >
        <img
          src="/images/profile.jpg"
          alt={t("about.photo.alt")}
          width="160"
          height="160"
          class="w-full h-full object-cover"
        />
      </div>

      <!-- Part 1: Philosophical opening (learn in public + intersection) -->
      <h1
        class="text-3xl md:text-4xl lg:text-5xl font-bold text-text-primary mb-4"
      >
        {t("about.hero.tagline")}
      </h1>

      <!-- Philosophy intro paragraph -->
      <p
        class="text-lg md:text-xl text-text-secondary max-w-2xl leading-relaxed"
      >
        {t("about.hero.intro")}
      </p>

      <!-- Part 2: Short bio section (separate from philosophy) -->
      <p class="text-base text-text-secondary max-w-2xl leading-relaxed mt-6">
        {t("about.hero.bio")}
      </p>

      <!-- Social icons (icons only, no labels -- per locked decision) -->
      <div class="flex items-center gap-5 mt-8">
        {
          socialLinks.map((link) => (
            <a
              href={link.href}
              class="text-text-secondary hover:text-teal-bright transition-colors"
              aria-label={link.name}
              target="_blank"
              rel="noopener noreferrer"
            >
              {link.strokeBased ? (
                <svg
                  width="22"
                  height="22"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  set:html={link.icon}
                />
              ) : (
                <svg
                  width="22"
                  height="22"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  set:html={link.icon}
                />
              )}
            </a>
          ))
        }
      </div>
    </div>
  </section>

  <!-- PILLAR BLOCKS SECTION -->
  <section class="max-w-6xl mx-auto px-6 lg:px-8 py-12 md:py-16 fade-up">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <PillarBlock
        pillar="IA"
        title={t("about.pillar.ia.title")}
        description={t("about.pillar.ia.description")}
        lang={lang}
        icon={pillarIcons.ia}
      />
      <PillarBlock
        pillar="Ingenierie"
        title={t("about.pillar.engineering.title")}
        description={t("about.pillar.engineering.description")}
        lang={lang}
        icon={pillarIcons.engineering}
      />
      <PillarBlock
        pillar="UX"
        title={t("about.pillar.ux.title")}
        description={t("about.pillar.ux.description")}
        lang={lang}
        icon={pillarIcons.ux}
      />
    </div>
  </section>

  <!-- CTA SECTION -->
  <section
    class="max-w-4xl mx-auto px-6 lg:px-8 py-12 md:py-16 text-center fade-up"
  >
    <a
      href={`/${lang}/`}
      class="inline-block border border-teal text-teal-bright hover:bg-teal/15 px-8 py-3 rounded-xs font-semibold transition-colors"
    >
      {t("about.cta")}
    </a>
  </section>
</BaseLayout>
